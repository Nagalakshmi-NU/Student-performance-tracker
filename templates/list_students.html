{% extends 'base.html' %}
{% block content %}
<h2>All Students</h2>
<table class="table table-striped">
  <thead><tr><th>Roll No.</th><th>Name</th><th>Average</th><th>Actions</th></tr></thead>
  <tbody>
    {% for s in students %}
    <tr>
      <td>{{ s.roll_number }}</td>
      <td>{{ s.name }}</td>
      <td>
        {% if s.average() is not none %}
          {{ '%.2f'|format(s.average()) }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        <a class="btn btn-sm btn-outline-primary" href="{{ url_for('view_student', roll_number=s.roll_number) }}">View</a>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('edit_student', roll_number=s.roll_number) }}">Edit</a>
        <form action="{{ url_for('delete_student', roll_number=s.roll_number) }}" method="post" style="display:inline">
          <button class="btn btn-sm btn-danger" type="submit" onclick="return confirm('Delete this student?')">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
